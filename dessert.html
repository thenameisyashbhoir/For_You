<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dessert ğŸ°</title>
  <link rel="stylesheet" href="css/theme.css" />
  <script src="config.js"></script>
</head>

<body>
  <main class="wrap">
    <section class="card" style="padding:18px 16px 18px;">
      <div class="title">Now dessert ğŸ°</div>
      <p class="subtitle">Pick the sweet.</p>

      <div class="grid" id="grid"></div>

      <div style="margin-top:14px;"><span class="pill" id="picked">Chosen: tap an option âœ¨</span></div>

      <div style="margin-top:14px;">
        <button class="btn btnPrimary btnFull" id="next" disabled>Finish ğŸ’–</button>
      </div>
    </section>
  </main>

  <script>
    const cfg = window.VALENTINE_CONFIG || {};
    const grid = document.getElementById('grid');
    const options = Array.isArray(cfg.dessertOptions) && cfg.dessertOptions.length ? cfg.dessertOptions : [];

    grid.innerHTML = options.map(o => `
        <div class="option" data-value="${o.title} ${o.emoji}">
          <div class="optionTitle">${o.title} ${o.emoji}</div>
          <p class="optionText">${o.subtitle || ''}</p>
        </div>
      `).join('');

    const items = document.querySelectorAll('.option');
    const picked = document.getElementById('picked');
    const next = document.getElementById('next');
    let choice = '';

    items.forEach(i => {
      i.addEventListener('click', () => {
        items.forEach(x => x.classList.remove('active'));
        i.classList.add('active');
        choice = i.dataset.value;
        picked.textContent = 'Chosen: ' + choice;
        next.disabled = false;
      });
    });

    next.addEventListener('click', () => {
      localStorage.setItem('dessert_choice', choice);
      location.href = 'lastpage.html';
    });
  </script>
</body>

</html>